@tailwind base;
@tailwind components;
@tailwind utilities;

/* ====================================
   THEATRICAL WEB DESIGN - GLOBAL STYLES
   ==================================== */

:root {
  --grain-opacity: 0.015; /* Reduced from 0.03 - more subtle, less obtrusive */
  --transition-prism: 800ms cubic-bezier(0.645, 0.045, 0.355, 1);
}

/* CSS Variable Font Setup */
@layer base {
  html {
    @apply antialiased;
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
    scroll-behavior: smooth;
  }

  body {
    @apply overflow-x-hidden;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Prevent content from hiding under fixed elements */
  * {
    scroll-margin-top: 6rem;
  }

  /* Disable default focus rings, we'll add custom ones */
  *:focus {
    outline: none;
  }

  /* Enhanced focus states - following Dieter Rams: clear, purposeful */
  *:focus-visible {
    @apply ring-2 ring-offset-2 ring-black/20;
    transition: box-shadow 0.15s ease;
  }

  /* Improved focus for interactive elements */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    @apply ring-2 ring-offset-2;
    transition: box-shadow 0.15s ease;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* ====================================
   GRAIN TEXTURE OVERLAY
   ==================================== */
.grain-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
  opacity: var(--grain-opacity);
  background-image:
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.03) 2px,
      rgba(0, 0, 0, 0.03) 4px
    ),
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.03) 2px,
      rgba(0, 0, 0, 0.03) 4px
    );
  animation: grain 8s steps(10) infinite;
}

@keyframes grain {
  0%, 100% { transform: translate(0, 0); }
  10% { transform: translate(-5%, -10%); }
  20% { transform: translate(-15%, 5%); }
  30% { transform: translate(7%, -25%); }
  40% { transform: translate(-5%, 25%); }
  50% { transform: translate(-15%, 10%); }
  60% { transform: translate(15%, 0%); }
  70% { transform: translate(0%, 15%); }
  80% { transform: translate(3%, 35%); }
  90% { transform: translate(-10%, 10%); }
}

/* ====================================
   MODE-SPECIFIC TRANSITIONS
   ==================================== */
.mode-transition {
  transition: all var(--transition-prism);
}

/* ====================================
   CUSTOM SCROLLBAR
   ==================================== */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-black/10 rounded-full;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-black/20;
}

/* ====================================
   MOBILE OPTIMIZATIONS
   ==================================== */
@media (max-width: 768px) {
  /* Larger touch targets */
  button,
  a {
    min-height: 44px;
    min-width: 44px;
  }

  /* Improved spacing on mobile */
  .container {
    @apply px-4;
  }
}

/* ====================================
   UTILITY CLASSES
   ==================================== */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .text-pretty {
    text-wrap: pretty;
  }

  /* Variable font weight utilities */
  .font-hairline {
    font-variation-settings: 'wght' 100;
  }

  .font-extralight {
    font-variation-settings: 'wght' 200;
  }

  .font-light {
    font-variation-settings: 'wght' 300;
  }

  .font-normal {
    font-variation-settings: 'wght' 400;
  }

  .font-medium {
    font-variation-settings: 'wght' 500;
  }

  .font-semibold {
    font-variation-settings: 'wght' 600;
  }

  .font-bold {
    font-variation-settings: 'wght' 700;
  }

  .font-extrabold {
    font-variation-settings: 'wght' 800;
  }

  .font-black {
    font-variation-settings: 'wght' 900;
  }
}

/* ====================================
   ANIMATION KEYFRAMES
   ==================================== */
@keyframes breathe {
  0%, 100% {
    opacity: 0.6;
  }
  50% {
    opacity: 1;
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-20px);
  }
}

.animate-breathe {
  animation: breathe 4s ease-in-out infinite;
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

/* Glitch effect for Lab mode */
@keyframes glitch {
  0% {
    transform: translate(0);
  }
  20% {
    transform: translate(-2px, 2px);
  }
  40% {
    transform: translate(-2px, -2px);
  }
  60% {
    transform: translate(2px, 2px);
  }
  80% {
    transform: translate(2px, -2px);
  }
  100% {
    transform: translate(0);
  }
}

.glitch {
  animation: glitch 0.1s infinite;
}

/* ====================================
   LAB MODE GLITCH EFFECT
   ==================================== */
.glitch {
  animation: glitch 0.1s infinite;
}

@keyframes glitch {
  0% {
    transform: translate(0);
  }
  20% {
    transform: translate(-2px, 2px);
  }
  40% {
    transform: translate(-2px, -2px);
  }
  60% {
    transform: translate(2px, 2px);
  }
  80% {
    transform: translate(2px, -2px);
  }
  100% {
    transform: translate(0);
  }
}

/* ====================================
   WHISPER SYSTEM STYLES
   ==================================== */

/* Whisper text treatment */
.whisper-text {
  text-shadow: 
    0 0 20px rgba(0, 0, 0, 0.03),
    0 0 40px rgba(0, 0, 0, 0.02);
  text-rendering: optimizeLegibility;
}

/* Subtle pulse for AI-generated whispers */
@keyframes whisper-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.85;
  }
}

.whisper-ai {
  animation: whisper-pulse 8s ease-in-out infinite;
}

/* Whisper container depth layers - Reduced opacity for subtlety */
.whisper-layer-far {
  filter: blur(0.5px);
  opacity: 0.06; /* Reduced from 0.12 */
}

.whisper-layer-mid {
  filter: blur(0.25px);
  opacity: 0.09; /* Reduced from 0.18 */
}

.whisper-layer-near {
  filter: blur(0);
  opacity: 0.12; /* Reduced from 0.25 */
}

/* ====================================
   INTRO SECTION STYLES
   ==================================== */

/* Static intro block for accessibility and indexing
   Added for fast skimming; interactive experience remains below. */
.intro-section {
  /* Ensure content is above background but below fixed elements */
  position: relative;
  z-index: 10;
}

.intro-content {
  max-width: 100%;
}

.intro-text,
.intro-subtext {
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.intro-nav ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.intro-link {
  display: inline-block;
  position: relative;
  font-weight: 300;
  letter-spacing: 0.02em;
}

/* Responsive adjustments */
@media (max-width: 767px) {
  .intro-section {
    padding-top: 3rem;
    padding-bottom: 2rem;
  }
  
  .intro-text {
    font-size: 0.95rem;
    line-height: 1.6;
  }
  
  .intro-subtext {
    font-size: 0.85rem;
  }
  
  .intro-nav ul {
    gap: 1rem;
  }
}
